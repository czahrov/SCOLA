!function(){var e={};e.launcher=function(){"function"==typeof e.page.default&&e.page.default();var t=window.location.pathname.match(new RegExp("^"+e.bazar.basePath+"(.*)$","i"))[1];if("/"==t)"function"==typeof e.page.index&&e.page.index();else{var n=t.match(/^\/([\w\-]+)\//)[1],i=n.replace(/\-/g,"_");"string"==typeof n&&n.length&&("function"==typeof e.page[i]?e.page[i]():"function"==typeof e.page.alternate&&e.page.alternate())}},e.bazar={basePath:"/PiotrM/wp_scola",logger:/logger/i.test(window.location.hash),mobile:/mobile/i.test(window.location.hash)||void 0},e.addon={isLogger:function(){return e.bazar.logger||!1},isMobile:function(){var t=e.bazar;return(t.logger||!1)&&console.log("isMobile()"),void 0===t.mobile&&(t.mobile=/Mobile|Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)),t.mobile},youtube:function(t){try{var n=e.bazar.logger||!1;if("string"!=typeof t.ID)throw"Niepoprawny ID filmu";if(!$(t.iframe).length)throw"iframe nie istnieje";return t.autoplay=t.autoplay||0,t.loop=t.loop||0,t.controls=t.controls||1,t.beforePlay=t.beforePlay||function(){},t.onClose=t.onClose||function(){},{el:t.iframe,url:"https://www.youtube.com/embed/"+t.ID+"?controls="+t.controls+"&autoplay="+t.autoplay+"&loop="+t.loop,open:function(){t.beforePlay(this.el),$(this.el).attr({src:this.url})},close:function(){t.onClose(this.el),$(this.el).attr({src:""})}}}catch(e){n&&console.error(e)}},form:{filters:{imie:/^[a-zA-Z \-żźćńółąśęŻŹĆŃÓŁĄŚĘ]+$/,nazwa:/^[\w \-żźćńółąśęŻŹĆŃÓŁĄŚĘ]+$/,adres:/^[\w \-żźćńółąśęŻŹĆŃÓŁĄŚĘ\.,\d]+$/,telefon:/^[\d\+ \(\)]+$/,mail:/^[^\d_\.\-][\w\d \.\-!#\$%&'\*\+\/=\?^`\{\|\}~]{1,64}@\w+(?:\.\w+)+$/,tekst:/^[\w\s \-żźćńółąśęŻŹĆŃÓŁĄŚĘ\[\]\{\}\|\+\?\.,\:;\$\^\*\(\)!#%~\/\\]*$/,tekst_req:/^[\w\s \-żźćńółąśęŻŹĆŃÓŁĄŚĘ\[\]\{\}\|\+\?\.,\:;\$\^\*\(\)!#%~\/\\]+$/},verify:function(t){e.addon.isLogger()&&console.log("form.verify()");var n=this;if("object"==typeof t&&"number"==typeof t.length){var o=[];for(i in t){var r=$(t[i].item).val();if("object"!=typeof t[i]||void 0===r||"string"!=typeof t[i].filterName||"string"!=typeof t[i].name||void 0===n.filters[t[i].filterName])return!1;n.filters[t[i].filterName].test(r)||o.push(t[i].item)}return!o.length||o}return!1}}},e.page={default:function(){e.addon.isLogger()&&(window.facepalm=e,console.log("page.default()")),function(e){e.click(function(){$(this).toggleClass("open").siblings().removeClass("open")})}($("#top > .menu > li")),function(e,t){var n=!1;e.click(function(){if(n)return!1;n=!0,e.add(t).toggleClass("open"),t.children("li.open").removeClass("open"),window.setTimeout(function(){n=!1},300)})}($("#top > .toggle"),$("#top > .menu")),function(e){e.click(function(e){var t=$(this);TweenLite.to($("html, body"),.5,{scrollTop:function(){return $(t.attr("slide-to")).offset().top},ease:Power2.easeInOut})})}($("[slide-to]")),function(e,t){var n,i={delay:200};e.on({show:function(t){e.addClass("open")},hide:function(t){e.removeClass("open")},check:function(n){(function(){return 0==$("body").prop("scrollTop")?$("html").prop("scrollTop"):$("body").prop("scrollTop")})()>=t.offset().top+t.outerHeight()?e.triggerHandler("show"):e.triggerHandler("hide")}}),$(window).scroll(function(){window.clearTimeout(n),n=window.setTimeout(function(){e.triggerHandler("check")},i.delay)})}($("#fb"),$("#top")),function(e,t,n,i,o){var r=!1;e.on({open:function(n,a,s,l){if(r)return!1;r=!0,new TimelineLite({onStart:function(){e.removeClass("ok info fail").addClass("open "+a),i.html(s),o.html(l)},onComplete:function(){r=!1}}).add("start",0).add(TweenLite.fromTo(e,.3,{opacity:0},{opacity:1}),"start").add(TweenLite.fromTo(t,.2,{opacity:0,y:-100},{opacity:1,y:0}),"start+=0.3")},close:function(n){if(r)return!1;r=!0,new TimelineLite({onComplete:function(){e.removeClass("open ok fail info"),r=!1}}).add("start",0).add(TweenLite.to(t,.2,{y:100,opacity:0}),"start").add(TweenLite.to(e,.3,{opacity:0}),"start+=0.2")}}),e.add(n).click(function(){e.triggerHandler("close")}),t.click(function(e){e.stopPropagation()})}($("#popup"),$("#popup > .box"),$("#popup > .box > .close"),$("#popup > .box > .view .text > .title"),$("#popup > .box > .view .text > .content")),function(e,t){e.on({set:function(e,t){$(this).find(".head > .title").text($(this).attr("item-title")+": "+t),$(this).attr("item-value",t)},reset:function(e){$(this).find(".head > .title").text($(this).attr("item-title")+" *"),$(this).attr("item-value","")},get:function(e){return{name:$(this).attr("item-name"),value:$(this).attr("item-value")}}}),t.click(function(e){$(this).parents(".customSelect:first").triggerHandler("set",[$(this).text()])})}($(".customSelect"),$(".customSelect > .options > .option")),function(e){e.on({get:function(e){var t=$(this).find("input:file");if(t.prop("files").length>1){var n=[];return $.each(t.prop("files"),function(e,i){n.push({name:t.attr("name")+"[]",value:i})}),n}return{name:t.attr("name"),value:t.prop("files")[0]}}}),e.find(".head").click(function(e){$(this).siblings("input:file").click()})}($(".customFile"))},alternate:function(){e.addon.isLogger()&&console.log("page.alternate()")},index:function(){e.addon.isLogger()&&console.log("page.index()"),function(e,t,n,i,o,r,a){var s,l={delay:3e3,duration:500},n=e.find(".view > .slide"),c=0,d=!1;r.children(".mark").css({width:function(){return String(100/n.length)+"%"}}),o.text(String(c+1)+"/"+String(n.length)),e.on({set:function(e){d=!0,c<0&&(c=n.length-1),c%=n.length,r.children(".mark").css({transform:"translateX("+100*c+"%)"}),o.text(String(c+1)+"/"+String(n.length)),new TimelineLite({onComplete:function(){d=!1}}).add("start",0).add(TweenLite.to(t,l.duration/1e3,{scrollLeft:c*n.first().outerWidth(!0),roundProps:"scrollLeft",ease:Power2.easeInOut}),"start").add(TweenLite.to(o,l.duration/1e3,{text:{value:String(c+1)+"/"+String(n.length),delimiter:""}}),"start").add(TweenLite.to(i.find(".content"),l.duration/1e3,{text:{value:n.eq(c).find(".box > .title").text(),delimiter:""}}),"start").add(TweenLite.to(i.find(".title"),l.duration/1e3,{text:{value:n.eq(c).find(".head > .kategoria").text(),delimiter:""}}),"start")},next:function(t){if(d)return!1;c++,e.triggerHandler("set")},prev:function(t){if(d)return!1;c--,e.triggerHandler("set")},start:function(t){e.triggerHandler("stop"),s=window.setInterval(function(){e.triggerHandler("next")},l.delay)},stop:function(e){window.clearInterval(s)},mouseenter:function(t){e.triggerHandler("stop")},mouseleave:function(t){e.triggerHandler("start")}}).swipe({swipeLeft:function(){e.triggerHandler("next")},swipeRight:function(){e.triggerHandler("prev")}}),a.children(".prev").click(function(){e.triggerHandler("prev")}),a.children(".next").click(function(){e.triggerHandler("next")}),e.triggerHandler("start"),$(window).resize(function(){e.triggerHandler("set")})}($("#home > .slider"),$("#home > .slider > .view"),$("#home > .slider > .view > .item"),$("#home > .slider > .notify"),$("#home > .slider > .grid > .numer"),$("#home > .slider > .grid > .paginacja"),$("#home > .slider > .grid > .nav")),function(e,t,n,i,o){var r={duration:.5},a=0,s=!1;o.text(String(a+1)+"/"+String(n.length)),e.on({set:function(e){s=!0,a<0&&(a=n.length-1),a%=n.length,new TimelineLite({onComplete:function(e){s=!1}}).add("start",0).add(TweenLite.to(t,r.duration,{scrollLeft:function(){return n.first().outerWidth(!0)*a},ease:Power2.easeOut}),"start").add(TweenLite.to(o,r.duration,{text:{value:String(a+1)+"/"+String(n.length),delimiter:""},ease:Power2.easeOut}),"start")},next:function(t){if(s||window.innerWidth>=768)return!1;a++,e.triggerHandler("set")},prev:function(t){if(s||window.innerWidth>=768)return!1;a--,e.triggerHandler("set")}}).swipe({swipeLeft:function(t){e.triggerHandler("next")},swipeRight:function(t){e.triggerHandler("prev")}}),i.click(function(t){$(this).hasClass("next")?e.triggerHandler("next"):$(this).hasClass("prev")&&e.triggerHandler("prev")}),$(window).resize(function(t){window.innerWidth>=768&&(a=0,e.triggerHandler("set"))})}($("#home > .jezyk"),$("#home > .jezyk > .box > .inner"),$("#home > .jezyk > .box > .inner > .item.flag"),$("#home > .jezyk > .box > .nav > .icon"),$("#home > .jezyk > .box > .nav > .number")),function(e,t,n,i){var o,r,a=0,s=!1,l={delay:4e3,duration:1e3};e.on({set:function(e){if(s)return!1;s=!0,a<0&&(a=n.length-1),a%=n.length,new TimelineLite({onComplete:function(){s=!1}}).add("start",0).add(TweenLite.to(t,l.duration/1e3,{scrollLeft:function(){return n.first().outerWidth(!0)*a},ease:Power2.easeOut}),"start")},next:function(t){s||(a++,e.triggerHandler("set"))},prev:function(t){s||(a--,e.triggerHandler("set"))},stop:function(e){window.clearInterval(o)},start:function(t){e.triggerHandler("stop"),o=window.setInterval(function(){e.triggerHandler("next")},l.delay)},mouseenter:function(t){e.triggerHandler("stop")},mouseleave:function(t){e.triggerHandler("start")}}).swipe({swipeLeft:function(t){e.triggerHandler("next")},swipeRight:function(t){e.triggerHandler("prev")}}),i.click(function(t){$(this).hasClass("next")?e.triggerHandler("next"):$(this).hasClass("prev")&&e.triggerHandler("prev")}),$(window).resize(function(){window.clearTimeout(r),r=window.setTimeout(function(){e.triggerHandler("set")},300)}),e.triggerHandler("start")}($("#home > .opinie .slider"),$("#home > .opinie .slider > .view"),$("#home > .opinie .slider > .view > .slide"),$("#home > .opinie .slider > .nav > .icon")),function(e,t,n,i){var o;e.on({submit:function(e){e.preventDefault()},send:function(t){$.post("newsletter",e.serializeArray(),function(e,t){console.log(e);var n=JSON.parse(e);void 0!==n.action&&(o=n.action),i.triggerHandler("open",[n.status,"Newsletter",n.msg]),console.log(n)})}}),t.click(function(){console.log(o),void 0===o?e.triggerHandler("send"):$.get(o,function(e){o=void 0;var t=JSON.parse(e);i.triggerHandler("open",[t.status,"Newsletter",t.msg]),console.log(t)})}),n.on("change",function(e){})}($("#home > .newsletter > form"),$("#home > .newsletter > form > .button"),$("#home > .newsletter > form > .mail"),$("#popup"))},testy:function(){e.addon.isLogger()&&console.log("page.testy()"),function(t,n,o,r,a,s,l,c,d,u,g,f,p){var h=0,m=0,w=!1;n.on({set:function(){h<0&&(h=0),h>m&&(h=m),h>r.length-1?h=r.length-1:TweenLite.to(l.filter(".next").children(".text"),.5,{text:{value:"następne",delimiter:""}}),r.length===m&&h+1===r.length&&(TweenLite.to(l.filter(".next").children(".text"),.5,{text:{value:"zakończ test",delimiter:""}}),l.filter(".next").addClass("end")),new TimelineLite({onStart:function(){c.text(String(h+1))},onComplete:function(){w=!1}}).add("start",0).add(TweenLite.to(o,.5,{scrollLeft:function(){return r.first().outerWidth(!0)*h},ease:Power2.easeOut}),"start")},next:function(){if(w)return!1;w=!0,h++,n.triggerHandler("set")},prev:function(){if(w)return!1;w=!0,h--,n.triggerHandler("set")},end:function(){var e,t=r.length,i=a.filter(".correct:checked").length,o=Math.round(i/t*1e3)/10;for(u.text(i),g.text(String(o)+"%"),n.slideUp(),d.slideDown(),"undefined"==typeof progi&&(progi=[{value:0,name:"nieznany"}]),e=progi.length-1;e>=0&&!(o>=progi[e].value);e--);f.text(progi[e].name)}}).swipe({swipeLeft:function(){n.triggerHandler("next")},swipeRight:function(){n.triggerHandler("prev")}}),l.click(function(e){$(this).hasClass("next")?$(this).hasClass("end")?n.triggerHandler("end"):n.triggerHandler("next"):$(this).hasClass("prev")&&($(this).siblings(".next").removeClass("end"),n.triggerHandler("prev"))}),s.click(function(e){if(n.hasClass("show"))e.preventDefault();else{var t=$(this);TweenLite.to(t.parents(".item:first").find(".title > .hole"),.3,{text:{value:t.children(".text").text(),delimiter:""}})}}),a.change(function(e){(m=a.filter(":checked").length)===r.length&&h===m-1&&(l.filter(".next").addClass("end"),TweenLite.to(l.filter(".next").children(".text"),.5,{text:{value:"zakończ test",delimiter:""}}))}),p.click(function(o){var s=$(this);if($(this).hasClass("show"))n.addClass("show").slideDown();else if($(this).hasClass("send")){var l=r.length,c=a.filter(".correct:checked").length,d=Math.round(c/l*1e3)/10;for(i=progi.length-1;i>=0&&!(d>=progi[i].value);i--);var u=progi[i].name;$.post(e.bazar.basePath+"/test-koniec",{good:a.filter(".correct:checked").length,all:r.length,level:u},function(e){console.log(e);var n=JSON.parse(e);console.log(n),t.triggerHandler("open",[n.status,n.title,n.msg]),"ok"===n.status&&s.fadeOut()})}})}($("#popup"),$("#test > .pytania"),$("#test > .pytania > .box > .view"),$("#test > .pytania > .box > .view > .item"),$("#test > .pytania > .box > .view > .item > .anwser > input"),$("#test > .pytania > .box > .view > .item > .anwser > label"),$("#test > .pytania > .box > .pagin > .nav"),$("#test > .pytania > .box > .pagin > .current > .number"),$("#test > .summary"),$("#test > .summary .stat .correct"),$("#test > .summary .stat .percent"),$("#test > .summary .note > .value"),$("#test > .summary .buttons > .customButton")),function(t,n,i){n.on({test:function(){$.post(e.bazar.basePath+"/test-start",n.serializeArray(),function(e){console.log(e);var i=JSON.parse(e);console.log(i),t.triggerHandler("open",[i.status,i.title,i.msg]),"ok"===i.status&&window.setTimeout(function(){n.trigger("submit")},3e3)})}}),i.click(function(e){n.triggerHandler("test")})}($("#popup"),$("#test > .mid > .box > form"),$("#test > .mid > .box > form > .submit"))},kontakt:function(){e.addon.isLogger()&&console.log("page.kontakt()"),function(t){var n,i={lat:49.618514,lng:20.694836};t.gmap3({map:{options:{center:i,zoom:18,mapTypeId:google.maps.MapTypeId.MAP,gestureHandling:"cooperative",mapTypeControl:!1}},marker:{latLng:i,options:{icon:e.bazar.basePath+"/wp-content/themes/scola/img/pin_scola.png"}}});var o=t.gmap3("get");$(window).resize(function(e){window.clearTimeout(n),n=window.setTimeout(function(){o.panTo(i)},500)})}($("#kontakt > .mapa > .kontener")),function(t,n,i){n.on({test:function(){$.post(e.bazar.basePath+"/form-kontakt",n.serializeArray(),function(e){console.log(e);var i=JSON.parse(e);console.log(i),"ok"===i.status&&n.trigger("reset"),t.triggerHandler("open",[i.status,i.title,i.msg])})}}),i.click(function(e){n.trigger("test")})}($("#popup"),$("#kontakt form"),$("#kontakt form > .button.send"))},tlumaczenia:function(){e.addon.isLogger()&&console.log("page.tlumaczenia()"),function(t,n,i,o){var r=!1,a=e.bazar.basePath+"/form-tlumaczenia";o.hide(),o.on({set:function(e,t){var n={duration:.3};$(this).find(".title").text(Math.round(1e3*t)/10),(new TimelineLite).add("start").add(TweenLite.to($(this).find(".progress > .bar"),n.duration,{scaleX:parseFloat(t)}),"start")},reset:function(e){$(this).find(".title").text(""),TweenLite.set($(this).find(".progress > .bar"),{scaleX:0})}}),n.on({send:function(e){var i="token"+(new Date).getTime(),o=$(this).triggerHandler("getData");o.append("token",i),$.ajax({method:"post",url:!0===r?a+"?save":a,data:o,contentType:!1,processData:!1,success:function(e,o){var a;try{a=JSON.parse(e),console.log(a)}catch(t){console.error(t),console.log(e)}!0===r?"ok"===a.status?n.triggerHandler("sendFile",[i]):t.triggerHandler("open",[a.status,a.title,a.msg]):(t.triggerHandler("open",[a.status,a.title,a.msg]),"ok"===a.status&&n.triggerHandler("clear"))},error:function(){t.triggerHandler("open",["fail","Błąd sieci","Nie udało się nawiązać połączenia z serwerem.<br>Proszę spróbować ponownie za chwilę."])}})},sendFile:function(e,r){var s=new FormData;n.find(".customFile").each(function(){var e=$(this).triggerHandler("get");void 0===e.length?s.append(e.name,e.value):$.each(e,function(e,t){s.append(e,t)})}),s.append("token",r),$.ajax({method:"post",url:a+"?load",data:s,contentType:!1,processData:!1,xhr:function(){var e=new window.XMLHttpRequest;return e.addEventListener("loadstart",function(e){o.triggerHandler("reset"),o.slideDown(),i.slideUp()}),e.upload.addEventListener("progress",function(e){var t=e.loaded/e.total;o.triggerHandler("set",t)}),e.upload.addEventListener("loadend",function(e){window.setTimeout(function(){o.slideUp(),o.triggerHandler("reset"),i.slideDown()},1e3)}),e},success:function(e,i){try{resp=JSON.parse(e),console.log(resp),t.triggerHandler("open",[resp.status,resp.title,resp.msg]),"ok"===resp.status&&n.triggerHandler("clear")}catch(t){console.error(t),console.log(e)}},error:function(){t.triggerHandler("open",["fail","Błąd sieci","Nie udało się nawiązać połączenia z serwerem.<br>Proszę spróbować ponownie za chwilę."])}})},getData:function(e){var t=new FormData;$.each(n.serializeArray(),function(e,n){t.append(n.name,n.value)});var i;return $(".customSelect").each(function(){i=$(this).triggerHandler("get"),t.append(i.name,i.value)}),t},clear:function(e){$(".customSelect").each(function(){$(this).triggerHandler("reset")}),n.trigger("reset")}}),i.click(function(e){$(this).hasClass("send")?n.triggerHandler("send"):$(this).hasClass("reset")&&n.triggerHandler("clear")}),n.find("input:file").change(function(e){var t=$(this).prop("files"),n=$(this).parents(".customFile:first").attr("item-title");if(t.length>0){r=!0;var i=[];$.each(t,function(e,t){i.push(t.name)}),n=i.join(", ")}else r=!1;$(this).parents(".customFile:first").find(".head > .title").text(n)}),o.triggerHandler("reset")}($("#popup"),$("#tlumaczenia > .bot form"),$("#tlumaczenia > .bot form > .buttons > .button"),$("#tlumaczenia > .bot form > .loader"))}},$(function(){e.launcher()})}();